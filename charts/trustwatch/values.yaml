# Number of replicas. trustwatch is stateless so multiple replicas are safe.
replicaCount: 1

# Container image settings.
image:
  repository: ghcr.io/ppiankov/trustwatch
  tag: ""  # defaults to appVersion from Chart.yaml
  pullPolicy: IfNotPresent

# Pull secrets for private registries.
imagePullSecrets: []

# Override the chart name or full release name.
nameOverride: ""
fullnameOverride: ""

# ServiceAccount for trustwatch. The chart creates one with cluster-wide
# read-only RBAC when rbac.create is true.
serviceAccount:
  create: true
  name: ""
  annotations: {}

# Create ClusterRole and ClusterRoleBinding for discovery access.
rbac:
  create: true

# Kubernetes Service exposing the web UI, metrics, and API.
service:
  type: ClusterIP
  port: 8080

# trustwatch runtime config — rendered into a ConfigMap mounted at
# /etc/trustwatch/config.yaml.
config:
  listenAddr: ":8080"          # HTTP listen address
  metricsPath: "/metrics"      # Prometheus scrape path
  refreshEvery: "2m"           # How often to re-scan (min 30s)
  warnBefore: "720h"           # 30 days — findings within this are warn
  critBefore: "336h"           # 14 days — findings within this are critical
  namespaces: []               # Empty = scan all namespaces
  external: []                 # External TLS targets, e.g. [{url: "https://vault:8200"}]
  notifications:
    enabled: false
    webhooks: []               # [{url: "https://hooks.slack.com/...", type: "slack"}]
    severities: ["critical", "warn"]
    cooldown: "1h"

# Container resource requests and limits.
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 128Mi

# Pod scheduling constraints.
nodeSelector: {}
tolerations: []
affinity: {}
topologySpreadConstraints: []

# PodDisruptionBudget — useful when running multiple replicas.
podDisruptionBudget:
  enabled: false
  minAvailable: 1

# NetworkPolicy — restricts ingress/egress when enabled.
# Allows: inbound HTTP (scrape + UI), outbound DNS + Kubernetes API.
networkPolicy:
  enabled: false

# PrometheusRule — generates alert rules when enabled.
prometheusRule:
  enabled: false
  labels: {}
  warnSeconds: 2592000   # 30d
  critSeconds: 1209600   # 14d

# Prometheus Operator ServiceMonitor for auto-discovery.
serviceMonitor:
  enabled: false
  interval: 30s     # Scrape interval
  labels: {}        # Extra labels for ServiceMonitor selection

# Grafana dashboard — auto-imported via sidecar when enabled.
grafanaDashboard:
  enabled: false
  labels:
    grafana_dashboard: "1"
  folder: ""
  annotations: {}
